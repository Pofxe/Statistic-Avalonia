<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="https://github.com/avaloniaui"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             x:Class="StepikAnalyticsDesktop.Views.CoursesView">
  <DockPanel Margin="16">
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Spacing="8">
      <TextBox Width="320" Watermark="Вставьте ссылку или ID курса" Text="{Binding CourseInput}" />
      <Button Content="Добавить" Command="{Binding AddCourseCommand}" />
    </StackPanel>

    <DataGrid Margin="0,16,0,0"
              ItemsSource="{Binding Courses}"
              SelectedItem="{Binding SelectedCourse}"
              AutoGenerateColumns="False"
              IsReadOnly="True">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Название" Binding="{Binding Title}" Width="*" />
        <DataGridTextColumn Header="Course ID" Binding="{Binding CourseId}" Width="120" />
        <DataGridTextColumn Header="Последняя синхронизация" Binding="{Binding LastSyncAt}" Width="180" />
        <DataGridTextColumn Header="Статус" Binding="{Binding SyncStatus}" Width="120" />
        <DataGridTemplateColumn Header="Действия" Width="240">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal" Spacing="4">
                <Button Content="Открыть" Command="{Binding DataContext.OpenCourseCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" />
                <Button Content="Синхронизировать" Command="{Binding DataContext.SyncCourseCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" />
                <Button Content="Удалить" Command="{Binding DataContext.DeleteCourseCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" />
              </StackPanel>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
      </DataGrid.Columns>
    </DataGrid>
  </DockPanel>
</UserControl>
